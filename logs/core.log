2022-06-25 16:19:44,621|ERROR|/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py(1891)|log_exception|Exception on /wechat/auth/login [POST]
Traceback (most recent call last):
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 2117, in make_response
    rv = self.response_class.force_type(rv, request.environ)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/werkzeug/wrappers/base_response.py", line 269, in force_type
    response = BaseResponse(*_run_wsgi_app(response, environ))
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/werkzeug/wrappers/base_response.py", line 26, in _run_wsgi_app
    return _run_wsgi_app(*args)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/werkzeug/test.py", line 1096, in run_wsgi_app
    app_rv = app(environ, start_response)
TypeError: login() takes 0 positional arguments but 2 were given

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1953, in full_dispatch_request
    return self.finalize_request(rv)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1968, in finalize_request
    response = self.make_response(rv)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 2125, in make_response
    reraise(TypeError, new_error, sys.exc_info()[2])
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/_compat.py", line 38, in reraise
    raise value.with_traceback(tb)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 2117, in make_response
    rv = self.response_class.force_type(rv, request.environ)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/werkzeug/wrappers/base_response.py", line 269, in force_type
    response = BaseResponse(*_run_wsgi_app(response, environ))
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/werkzeug/wrappers/base_response.py", line 26, in _run_wsgi_app
    return _run_wsgi_app(*args)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/werkzeug/test.py", line 1096, in run_wsgi_app
    app_rv = app(environ, start_response)
TypeError: login() takes 0 positional arguments but 2 were given
The view function did not return a valid response. The return type must be a string, dict, tuple, Response instance, or WSGI callable, but it was a function.
2022-06-25 17:07:13,674|ERROR|/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py(1891)|log_exception|Exception on /wechat/auth/login [POST]
Traceback (most recent call last):
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/vega/workspace/codes/py_space/working/photo-tools-api/photo_tools_app/controller/wechat/auth.py", line 36, in login
    url = url.format(appid, secret, code)
AttributeError: 'Constant' object has no attribute 'format'
2022-06-25 17:08:11,321|ERROR|/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py(1891)|log_exception|Exception on /wechat/auth/login [POST]
Traceback (most recent call last):
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/vega/workspace/codes/py_space/working/photo-tools-api/photo_tools_app/controller/wechat/auth.py", line 36, in login
    url = url.format(appid, secret, code)
AttributeError: 'Constant' object has no attribute 'format'
2022-06-25 17:08:37,808|ERROR|/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py(1891)|log_exception|Exception on /wechat/auth/login [POST]
Traceback (most recent call last):
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/vega/workspace/codes/py_space/working/photo-tools-api/photo_tools_app/controller/wechat/auth.py", line 37, in login
    url = url.format(appid, secret, code)
AttributeError: 'Constant' object has no attribute 'format'
2022-06-25 17:08:52,408|ERROR|/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py(1891)|log_exception|Exception on /wechat/auth/login [POST]
Traceback (most recent call last):
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/vega/workspace/codes/py_space/working/photo-tools-api/photo_tools_app/controller/wechat/auth.py", line 37, in login
    url = url.format(appid, secret, code)
AttributeError: 'Constant' object has no attribute 'format'
2022-06-25 17:09:35,030|ERROR|/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py(1891)|log_exception|Exception on /wechat/auth/login [POST]
Traceback (most recent call last):
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/vega/workspace/codes/py_space/working/photo-tools-api/photo_tools_app/controller/wechat/auth.py", line 37, in login
    url = url.format(appid, secret, code)
AttributeError: 'Constant' object has no attribute 'format'
2022-06-25 17:10:31,459|ERROR|/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py(1891)|log_exception|Exception on /wechat/auth/login [POST]
Traceback (most recent call last):
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/vega/workspace/codes/py_space/working/photo-tools-api/photo_tools_app/controller/wechat/auth.py", line 36, in login
    url = url.format(appid, secret, code)
AttributeError: 'Constant' object has no attribute 'format'
2022-06-25 17:11:06,268|ERROR|/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py(1891)|log_exception|Exception on /wechat/auth/login [POST]
Traceback (most recent call last):
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/vega/workspace/codes/py_space/working/photo-tools-api/photo_tools_app/controller/wechat/auth.py", line 37, in login
    url = url.format(appid, secret, code)
AttributeError: 'Constant' object has no attribute 'format'
2022-06-25 21:22:25,456|ERROR|/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py(1891)|log_exception|Exception on /wechat/auth/test [GET]
Traceback (most recent call last):
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/vega/workspace/codes/py_space/working/photo-tools-api/photo_tools_app/utils/jwt_required.py", line 13, in wrapper
    print(g.session_key)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/werkzeug/local.py", line 347, in __getattr__
    return getattr(self._get_current_object(), name)
AttributeError: '_AppCtxGlobals' object has no attribute 'session_key'
2022-06-25 21:22:49,264|ERROR|/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py(1891)|log_exception|Exception on /wechat/auth/test [GET]
Traceback (most recent call last):
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/vega/workspace/codes/py_space/working/photo-tools-api/photo_tools_app/utils/jwt_required.py", line 13, in wrapper
    print(g.session_key)
  File "/Users/zhouquan/opt/anaconda3/envs/tensorflow2/lib/python3.9/site-packages/werkzeug/local.py", line 347, in __getattr__
    return getattr(self._get_current_object(), name)
AttributeError: '_AppCtxGlobals' object has no attribute 'session_key'
